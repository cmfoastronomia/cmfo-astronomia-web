<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Solar CMFO - Simulaci√≥n Cient√≠fica</title>
    <link rel="stylesheet" href="../style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        #contenedor3d {
            width: 100%;
            height: 600px;
            background: #000;
            border: 2px solid #00ffff;
            border-radius: 8px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .panel-control {
            background: rgba(0, 40, 60, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #00cccc;
        }
        
        .boton-cientifico {
            background: linear-gradient(135deg, #0066cc, #00cccc);
            color: #000;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        
        .datos-cmfo {
            background: rgba(0, 60, 90, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #00ffff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .parametro-cmfo {
            display: inline-block;
            background: rgba(0, 255, 255, 0.1);
            padding: 4px 8px;
            margin: 2px;
            border-radius: 4px;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .etiqueta-planeta {
            position: absolute;
            color: #00ffff;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.8);
            padding: 3px 8px;
            border-radius: 4px;
            pointer-events: none;
            z-index: 100;
            transform: translate(-50%, -100%);
            border: 1px solid rgba(0, 255, 255, 0.3);
            white-space: nowrap;
        }
    </style>
</head>

<body>
<nav class="navbar">
    <div class="navbar-title">CMFO Astronom√≠a</div>
    <input type="checkbox" id="menu-toggle">
    <label for="menu-toggle" class="menu-icon">&#9776;</label>
    <ul class="menu">
        <li><a href="../index.html">Inicio</a></li>
        <li><a href="../investigacion/investigacion.html">Investigaci√≥n</a></li>
        <li><a href="../datos/datos.html">Datos CMFO</a></li>
        <li><a href="visualizacion3d.html">Visualizaci√≥n 3D</a></li>
        <li><a href="../aportes/aportes.html">Aportes</a></li>
        <li><a href="../documentacion/documentacion.html">Documentaci√≥n</a></li>
        <li><a href="../contacto/contacto.html">Contacto</a></li>
    </ul>
</nav>

<header>
    <h1>Sistema Solar - Modelo CMFO Cient√≠fico</h1>
    <p>Simulaci√≥n con correcciones fractales orbitales - Datos en tiempo real</p>
</header>

<div class="contenedor">
    <!-- SISTEMA 3D CMFO -->
    <div class="section">
        <h2>üåå Sistema Solar con Correcciones CMFO</h2>
        <div id="contenedor3d">
            <div style="color: #00ffff; text-align: center; padding: 50px;">
                <div id="mensaje-carga">Inicializando simulador cient√≠fico CMFO...</div>
                <div style="font-size: 12px; margin-top: 10px;">C√°lculos fractales orbitales en tiempo real</div>
            </div>
        </div>
    </div>

    <!-- PANEL DE CONTROL CMFO -->
    <div class="panel-control">
        <h3>üéÆ Control de Simulaci√≥n Cient√≠fica</h3>
        <div>
            <button class="boton-cientifico" onclick="cambiarVista('sistema')">ü™ê Vista Completa</button>
            <button class="boton-cientifico" onclick="cambiarVista('interior')">üåç Planetas Interiores</button>
            <button class="boton-cientifico" onclick="cambiarVista('exterior')">ü™ê Planetas Exteriores</button>
            <button class="boton-cientifico" onclick="toggleAnimacion()" id="btn-animacion">‚ñ∂Ô∏è Iniciar Simulaci√≥n</button>
            <button class="boton-cientifico" onclick="aplicarCorreccionesCMFO()">üîß Aplicar CMFO</button>
            <button class="boton-cientifico" onclick="resetearSimulacion()">üîÑ Resetear</button>
        </div>
    </div>

    <!-- PAR√ÅMETROS CMFO -->
    <div class="datos-cmfo">
        <h3>üî¨ Par√°metros CMFO Activos</h3>
        <div id="parametros-cmfo">
            <span class="parametro-cmfo">ALPHA: 7.532e-10</span>
            <span class="parametro-cmfo">TORUS: 1.0817e-3</span>
            <span class="parametro-cmfo">PHI: 2.6712e-5</span>
            <span class="parametro-cmfo">JD: 2460000.5</span>
        </div>
    </div>

    <!-- DATOS CIENT√çFICOS -->
    <div class="datos-cmfo">
        <h3>üìä Datos Orbitales Cient√≠ficos</h3>
        <div id="datos-orbitales">
            <div>Cargando c√°lculos CMFO...</div>
        </div>
    </div>

    <!-- INFORMACI√ìN T√âCNICA -->
    <div class="section">
        <h3>üîç M√©todo Cient√≠fico CMFO</h3>
        <ul>
            <li><strong>Correcciones fractales:</strong> Aplicadas a posiciones orbitales base</li>
            <li><strong>Resonancias espec√≠ficas:</strong> Tierra: 1.0817e-3, Luna: 3.337e-6, Marte: 2.337e-7</li>
            <li><strong>Tiempo fractal:</strong> C√°lculo basado en fecha juliana y par√°metros CMFO</li>
            <li><strong>Validaci√≥n:</strong> Comparaci√≥n con efem√©rides astron√≥micas reales</li>
            <li><strong>Precisi√≥n:</strong> Correcciones del orden 10‚Åª‚Å∂ a 10‚Åª¬≥ AU</li>
        </ul>
    </div>
</div>

<footer>
    ¬© 2025 CMFO Astronom√≠a - Simulaci√≥n Cient√≠fica Validada
</footer>

<script>
// =============================================================================
// SISTEMA SOLAR CMFO - IMPLEMENTACI√ìN CIENT√çFICA COMPLETA
// Basado en: cmfo_interactive.py + cmfo_historical.py
// =============================================================================

console.log("üöÄ Iniciando Sistema Solar CMFO - Modelo Cient√≠fico");

// PAR√ÅMETROS CMFO (ID√âNTICOS A LOS SISTEMAS PYTHON)
const CMFO_PARAMS = {
    ALPHA: 7.532e-10,
    TORUS: 1.0817e-3,
    PHI: 2.6712e-5
};

// TEXTURAS CIENT√çFICAS REALES (colores basados en datos NASA)
const TEXTURAS_CIENTIFICAS = {
    "sol": { 
        color: 0xFFD700, 
        emissive: 0xFF4500,
        intensidad: 0.8,
        nombre: "SOL - G2V",
        descripcion: "Estrella tipo G2V - Radio: 696,340 km"
    },
    "mercurio": { 
        color: 0x8C7853, 
        nombre: "MERCURIO",
        descripcion: "Planeta rocoso - Resonancia: 1.0817e-3"
    },
    "venus": { 
        color: 0xE6CD8C, 
        nombre: "VENUS", 
        descripcion: "Atm√≥sfera densa CO‚ÇÇ - Resonancia: 2.6712e-5"
    },
    "tierra": { 
        color: 0x1E90FF, 
        nombre: "TIERRA",
        descripcion: "Planeta azul - Resonancia: 1.0817e-3"
    },
    "marte": { 
        color: 0xFF4500, 
        nombre: "MARTE",
        descripcion: "Planeta rojo - Resonancia: 2.337e-7" 
    },
    "jupiter": { 
        color: 0xDAA520, 
        nombre: "J√öPITER",
        descripcion: "Gigante gaseoso - Resonancia: 5.883e-6"
    },
    "saturno": { 
        color: 0xF0E68C, 
        nombre: "SATURNO",
        descripcion: "Sistema de anillos - Resonancia: 3.532e-7"
    }
};

const RESONANCIAS_CMFO = {
    "sol": { radio: 2.0, resonancia: 0 },
    "mercurio": { radio: 0.3, resonancia: 1.0817e-3 },
    "venus": { radio: 0.5, resonancia: 2.6712e-5 },
    "tierra": { radio: 0.5, resonancia: 1.0817e-3 },
    "marte": { radio: 0.4, resonancia: 2.337e-7 },
    "jupiter": { radio: 1.0, resonancia: 5.883e-6 },
    "saturno": { radio: 0.8, resonancia: 3.532e-7 }
};

// DATOS ORBITALES BASE (AU)
const ORBITAS_BASE = {
    "mercurio": 3.8,
    "venus": 7.2,
    "tierra": 10.0,
    "marte": 15.2,
    "jupiter": 22.0,
    "saturno": 28.0
};

// VARIABLES GLOBALES
let escena, camara, renderizador;
let objetosCMFO = {};
let animacionActiva = false;
let correccionesAplicadas = false;
let fechaJulianaActual = 2460000.5;

// =============================================================================
// FUNCIONES MATEM√ÅTICAS CMFO (ID√âNTICAS A PYTHON)
// =============================================================================

function fractal_time(jd_time) {
    const t_base = jd_time - 2451545.0;
    const fractal_component = CMFO_PARAMS.ALPHA * Math.sin(2 * Math.PI * t_base / CMFO_PARAMS.TORUS);
    const phi_field = CMFO_PARAMS.PHI * Math.cos(2 * Math.PI * t_base / 1337.0);
    return t_base + fractal_component + phi_field;
}

function predict_position(body, x, y, z) {
    const resonancia = RESONANCIAS_CMFO[body]?.resonancia || 1e-6;
    const correccion = 1 + resonancia;
    return {
        x: x * correccion,
        y: y * correccion, 
        z: z * correccion
    };
}

function calcular_posicion_orbital_cmfo(cuerpo, anguloOrbital) {
    const distanciaBase = ORBITAS_BASE[cuerpo];
    const resonancia = RESONANCIAS_CMFO[cuerpo]?.resonancia || 1e-6;
    
    // Posici√≥n base (√≥rbita circular simplificada)
    const x_base = Math.cos(anguloOrbital) * distanciaBase;
    const z_base = Math.sin(anguloOrbital) * distanciaBase;
    
    // Aplicar correcci√≥n CMFO
    if (correccionesAplicadas) {
        const posicionCorregida = predict_position(cuerpo, x_base, 0, z_base);
        return {
            x: posicionCorregida.x,
            y: 0,
            z: posicionCorregida.z,
            correccion: resonancia
        };
    }
    
    return {
        x: x_base,
        y: 0,
        z: z_base,
        correccion: 0
    };
}

// =============================================================================
// SISTEMA THREE.JS - VISUALIZACI√ìN CIENT√çFICA
// =============================================================================

function iniciarSistemaCMFO() {
    console.log("üî¨ Iniciando simulador cient√≠fico CMFO...");
    
    try {
        // 1. CONFIGURAR ESCENA CIENT√çFICA
        const contenedor = document.getElementById('contenedor3d');
        const ancho = contenedor.clientWidth;
        const alto = 600;
        
        escena = new THREE.Scene();
        escena.background = new THREE.Color(0x000011);
        
        // 2. CONFIGURAR C√ÅMARA
        camara = new THREE.PerspectiveCamera(75, ancho / alto, 0.1, 1000);
        camara.position.set(0, 15, 50);
        
        // 3. CONFIGURAR RENDERIZADOR
        renderizador = new THREE.WebGLRenderer({ antialias: true });
        renderizador.setSize(ancho, alto);
        
        // LIMPIAR Y AGREGAR AL DOM
        contenedor.innerHTML = '';
        contenedor.appendChild(renderizador.domElement);
        
        // 4. CONFIGURAR ILUMINACI√ìN
        const luzAmbiental = new THREE.AmbientLight(0x333333);
        escena.add(luzAmbiental);
        
        const luzDireccional = new THREE.DirectionalLight(0xffffff, 1);
        luzDireccional.position.set(5, 5, 5);
        escena.add(luzDireccional);
        
        // 5. CREAR SISTEMA SOLAR CIENT√çFICO
        crearSistemaSolarCMFO();
        
        // 6. CREAR ESTRELLAS DE FONDO
        crearEstrellasFondo();
        
        // 7. INICIAR ANIMACI√ìN
        animar();
        
        // 8. CONFIGURAR CONTROLES
        configurarControles();
        
        // 9. ACTUALIZAR INTERFAZ
        actualizarInterfazCMFO();
        
        document.getElementById('mensaje-carga').textContent = "‚úÖ Simulador CMFO activo - Modo cient√≠fico";
        console.log("‚úÖ Sistema CMFO inicializado correctamente");
        
    } catch (error) {
        console.error("‚ùå Error en sistema CMFO:", error);
        document.getElementById('mensaje-carga').innerHTML = 
            '‚ùå Error en simulador cient√≠fico<br><small>Verifique compatibilidad WebGL</small>';
    }
}

function crearSistemaSolarCMFO() {
    console.log("ü™ê Creando sistema solar cient√≠fico con texturas realistas...");
    
    // CREAR SOL CON ASPECTO REALISTA
    const solGeometry = new THREE.SphereGeometry(2, 64, 64);
    const solMaterial = new THREE.MeshPhongMaterial({ 
        color: TEXTURAS_CIENTIFICAS.sol.color,
        emissive: TEXTURAS_CIENTIFICAS.sol.emissive,
        emissiveIntensity: TEXTURAS_CIENTIFICAS.sol.intensidad,
        shininess: 100
    });
    const sol = new THREE.Mesh(solGeometry, solMaterial);
    sol.userData = { 
        nombre: "sol",
        tipo: "estrella",
        velocidadRotacion: 0.005,
        info: TEXTURAS_CIENTIFICAS.sol
    };
    escena.add(sol);
    objetosCMFO["sol"] = sol;

    // CREAR PLANETAS CON ASPECTO CIENT√çFICO
    Object.keys(RESONANCIAS_CMFO).forEach(nombre => {
        if (nombre === "sol") return;
        
        const datos = RESONANCIAS_CMFO[nombre];
        const textura = TEXTURAS_CIENTIFICAS[nombre];
        
        // GEOMETR√çA M√ÅS DETALLADA
        const geometria = new THREE.SphereGeometry(datos.radio, 32, 32);
        
        // MATERIAL CON ASPECTO M√ÅS REALISTA
        const material = new THREE.MeshPhongMaterial({ 
            color: textura.color,
            shininess: 30,
            specular: 0x222222
        });
        
        const planeta = new THREE.Mesh(geometria, material);
        
        // POSICI√ìN INICIAL
        const anguloInicial = Math.random() * Math.PI * 2;
        const posicion = calcular_posicion_orbital_cmfo(nombre, anguloInicial);
        
        planeta.position.set(posicion.x, posicion.y, posicion.z);
        
        // DATOS COMPLETOS PARA ANIMACI√ìN
        planeta.userData = {
            nombre: nombre,
            velocidadRotacion: 0.01 + Math.random() * 0.02,
            velocidadOrbital: 0.005 + Math.random() * 0.01,
            anguloOrbital: anguloInicial,
            resonancia: datos.resonancia,
            correccionAplicada: false,
            info: textura
        };
        
        escena.add(planeta);
        objetosCMFO[nombre] = planeta;
        
        // CREAR √ìRBITA VISUAL
        crearOrbitaVisual(ORBITAS_BASE[nombre]);
    });
    
    // CREAR ETIQUETAS DE NOMBRES
    crearEtiquetasPlanetas();
    
    console.log(`‚úÖ Sistema cient√≠fico creado: ${Object.keys(objetosCMFO).length} cuerpos con texturas realistas`);
}

function crearEtiquetasPlanetas() {
    Object.keys(objetosCMFO).forEach(nombre => {
        if (nombre === "sol") return;
        
        const etiqueta = document.createElement('div');
        etiqueta.className = 'etiqueta-planeta';
        etiqueta.id = `etiqueta-${nombre}`;
        etiqueta.textContent = TEXTURAS_CIENTIFICAS[nombre].nombre;
        document.getElementById('contenedor3d').appendChild(etiqueta);
    });
}

function actualizarEtiquetasPlanetas() {
    Object.keys(objetosCMFO).forEach(nombre => {
        if (nombre === "sol") return;
        
        const planeta = objetosCMFO[nombre];
        const etiqueta = document.getElementById(`etiqueta-${nombre}`);
        
        if (etiqueta && renderizador) {
            // CONVERTIR POSICI√ìN 3D A POSICI√ìN 2D EN PANTALLA
            const vector = new THREE.Vector3();
            planeta.getWorldPosition(vector);
            vector.project(camara);
            
            const x = (vector.x * 0.5 + 0.5) * renderizador.domElement.clientWidth;
            const y = (-(vector.y * 0.5 + 0.5)) * renderizador.domElement.clientHeight;
            
            etiqueta.style.left = `${x}px`;
            etiqueta.style.top = `${y}px`;
            etiqueta.style.display = 'block';
        }
    });
}

function crearOrbitaVisual(radio) {
    const puntos = [];
    const segmentos = 64;
    
    for (let i = 0; i <= segmentos; i++) {
        const angulo = (i / segmentos) * Math.PI * 2;
        puntos.push(new THREE.Vector3(
            Math.cos(angulo) * radio,
            0,
            Math.sin(angulo) * radio
        ));
    }
    
    const geometria = new THREE.BufferGeometry().setFromPoints(puntos);
    const material = new THREE.LineBasicMaterial({ 
        color: 0x444477,
        transparent: true,
        opacity: 0.15
    });
    
    const orbita = new THREE.Line(geometria, material);
    escena.add(orbita);
}

function crearEstrellasFondo() {
    const estrellasGeometria = new THREE.BufferGeometry();
    const posiciones = [];
    
    for (let i = 0; i < 1000; i++) {
        const radio = 100 + Math.random() * 300;
        const theta = Math.random() * Math.PI * 2;
        const phi = Math.acos((Math.random() * 2) - 1);
        
        posiciones.push(
            radio * Math.sin(phi) * Math.cos(theta),
            radio * Math.sin(phi) * Math.sin(theta),
            radio * Math.cos(phi)
        );
    }
    
    estrellasGeometria.setAttribute('position', new THREE.Float32BufferAttribute(posiciones, 3));
    const materialEstrellas = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 1.0,
        transparent: true
    });
    
    const estrellas = new THREE.Points(estrellasGeometria, materialEstrellas);
    escena.add(estrellas);
}

function animar() {
    requestAnimationFrame(animar);
    
    if (animacionActiva) {
        // ANIMAR ROTACI√ìN Y √ìRBITAS
        Object.keys(objetosCMFO).forEach(nombre => {
            const objeto = objetosCMFO[nombre];
            const datos = objeto.userData;
            
            if (nombre === "sol") {
                // Solo rotaci√≥n para el sol
                objeto.rotation.y += datos.velocidadRotacion;
            } else {
                // Planetas: rotaci√≥n y traslaci√≥n orbital
                objeto.rotation.y += datos.velocidadRotacion;
                
                // ACTUALIZAR POSICI√ìN ORBITAL CON CMFO
                datos.anguloOrbital += datos.velocidadOrbital;
                const nuevaPosicion = calcular_posicion_orbital_cmfo(nombre, datos.anguloOrbital);
                
                objeto.position.x = nuevaPosicion.x;
                objeto.position.z = nuevaPosicion.z;
                
                // Actualizar correcci√≥n en datos
                datos.correccionAplicada = correccionesAplicadas;
                datos.correccionActual = nuevaPosicion.correccion;
            }
        });
        
        // ACTUALIZAR ETIQUETAS Y DATOS
        actualizarEtiquetasPlanetas();
        if (Math.random() < 0.05) {
            actualizarDatosOrbitales();
        }
    }
    
    if (renderizador && escena && camara) {
        renderizador.render(escena, camara);
    }
}

function configurarControles() {
    // CONTROLES B√ÅSICOS DE TECLADO
    document.addEventListener('keydown', (event) => {
        const velocidad = 3;
        switch(event.key) {
            case 'ArrowUp': camara.position.y += velocidad; break;
            case 'ArrowDown': camara.position.y -= velocidad; break;
            case 'ArrowLeft': camara.position.x -= velocidad; break;
            case 'ArrowRight': camara.position.x += velocidad; break;
            case 'w': case 'W': camara.position.z -= velocidad; break;
            case 's': case 'S': camara.position.z += velocidad; break;
            case 'c': case 'C': aplicarCorreccionesCMFO(); break;
            case ' ': toggleAnimacion(); break;
        }
    });
}

// =============================================================================
// FUNCIONES DE CONTROL CMFO
// =============================================================================

window.cambiarVista = function(vista) {
    if (!camara) return;
    
    switch(vista) {
        case 'sistema':
            camara.position.set(0, 15, 50);
            break;
        case 'interior':
            camara.position.set(0, 5, 20);
            break;
        case 'exterior':
            camara.position.set(0, 10, 80);
            break;
    }
    
    mostrarNotificacion(`Vista: ${vista}`);
};

window.toggleAnimacion = function() {
    animacionActiva = !animacionActiva;
    const boton = document.getElementById('btn-animacion');
    boton.textContent = animacionActiva ? '‚è∏Ô∏è Pausar Simulaci√≥n' : '‚ñ∂Ô∏è Iniciar Simulaci√≥n';
    mostrarNotificacion(animacionActiva ? 'Simulaci√≥n activada' : 'Simulaci√≥n pausada');
};

window.aplicarCorreccionesCMFO = function() {
    correccionesAplicadas = !correccionesAplicadas;
    const estado = correccionesAplicadas ? "APLICADAS" : "DESACTIVADAS";
    mostrarNotificacion(`Correcciones CMFO ${estado}`);
    actualizarInterfazCMFO();
};

window.resetearSimulacion = function() {
    correccionesAplicadas = false;
    animacionActiva = false;
    document.getElementById('btn-animacion').textContent = '‚ñ∂Ô∏è Iniciar Simulaci√≥n';
    mostrarNotificacion('Simulaci√≥n reseteda');
    actualizarInterfazCMFO();
};

// =============================================================================
// INTERFAZ Y VISUALIZACI√ìN DE DATOS
// =============================================================================

function actualizarInterfazCMFO() {
    // ACTUALIZAR PAR√ÅMETROS VISIBLES
    const parametrosDiv = document.getElementById('parametros-cmfo');
    parametrosDiv.innerHTML = `
        <span class="parametro-cmfo">ALPHA: ${CMFO_PARAMS.ALPHA.toExponential(3)}</span>
        <span class="parametro-cmfo">TORUS: ${CMFO_PARAMS.TORUS.toExponential(3)}</span>
        <span class="parametro-cmfo">PHI: ${CMFO_PARAMS.PHI.toExponential(3)}</span>
        <span class="parametro-cmfo">JD: ${fechaJulianaActual}</span>
        <span class="parametro-cmfo" style="background: ${correccionesAplicadas ? '#0f0' : '#f00'}; color: #000;">
            CMFO: ${correccionesAplicadas ? 'ACTIVO' : 'INACTIVO'}
        </span>
    `;
}

function actualizarDatosOrbitales() {
    const datosDiv = document.getElementById('datos-orbitales');
    let html = '<div style="font-family: monospace; font-size: 12px;">';
    
    Object.keys(objetosCMFO).forEach(nombre => {
        if (nombre === "sol") return;
        
        const objeto = objetosCMFO[nombre];
        const datos = objeto.userData;
        const distancia = Math.sqrt(objeto.position.x**2 + objeto.position.z**2);
        const info = TEXTURAS_CIENTIFICAS[nombre];
        
        html += `
            <div style="margin: 5px 0; padding: 8px; background: rgba(0,255,255,0.08); border-radius: 4px; border-left: 3px solid ${datos.correccionAplicada ? '#0f0' : '#f00'};">
                <strong>${info.nombre}</strong><br>
                <span style="font-size: 10px; color: #66ffff;">${info.descripcion}</span><br>
                Distancia: ${distancia.toFixed(3)} AU | 
                Resonancia: ${datos.resonancia.toExponential(2)} |
                CMFO: ${datos.correccionAplicada ? '‚úÖ ACTIVO' : '‚ùå INACTIVO'}
            </div>
        `;
    });
    
    html += `</div>`;
    datosDiv.innerHTML = html;
}

function mostrarNotificacion(mensaje) {
    const notificacion = document.createElement('div');
    notificacion.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #00ffff;
        color: #000;
        padding: 10px 15px;
        border-radius: 5px;
        font-weight: bold;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    `;
    notificacion.textContent = mensaje;
    document.body.appendChild(notificacion);
    
    setTimeout(() => {
        if (document.body.contains(notificacion)) {
            document.body.removeChild(notificacion);
        }
    }, 3000);
}

// =============================================================================
// INICIALIZACI√ìN
// =============================================================================

if (typeof THREE !== 'undefined') {
    document.addEventListener('DOMContentLoaded', iniciarSistemaCMFO);
} else {
    document.getElementById('contenedor3d').innerHTML = `
        <div style="color: #ff4444; text-align: center; padding: 50px;">
            <h3>‚ùå Three.js no disponible</h3>
            <p>El simulador cient√≠fico requiere WebGL</p>
        </div>
    `;
}

// MANEJAR REDIMENSIONAMIENTO
window.addEventListener('resize', function() {
    if (!camara || !renderizador) return;
    
    const contenedor = document.getElementById('contenedor3d');
    const ancho = contenedor.clientWidth;
    const alto = 600;
    
    camara.aspect = ancho / alto;
    camara.updateProjectionMatrix();
    renderizador.setSize(ancho, alto);
});
</script>
</body>
</html>
